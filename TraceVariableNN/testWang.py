# -- coding: utf-8 --
'''
Created on 14 July, 2021

@author: Guillaume Cleuziou
'''

import numpy as np
import tensorflow as tf

# import du code de wang
import Training as network

import util_liste

import json

# on fixe des traces de longueur 10
LENGTH = 10
# on génère des traces d'entiers de longueur LENGHT (pst : Program Symbol Traces)
pst = np.random.randint(0,10,(network.batch_size, LENGTH))
# tl : Trace Lengths
tl = [LENGTH]*network.batch_size
# on génère aléatoirement un label de classe pour chaque programme (l : labels)
l = np.random.randint(0,network.CLASSES,(network.program_number,))

print("-----\n pst :")
print(pst)
print("-----\n tl : ")
print(tl)
print("-----\n l :")
print(l)

'''
TEST AVEC LIGNE = Un Programme
'''

print("TEST AVEC LIGNE = Un Programme")
pst = [
 [ 2, 2, 2, 2, 1, 1, 0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,0,0,0,0,0],
 [ 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 2, 2, 2,0,0,0,0],
 [ 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1],
 [ 1, 1, 1, 1, 1, 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1,0,0,0,0,0,0,0,0],
 [ 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,0,0,0,0],
 [ 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1],
 [ 1, 1, 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 2, 2, 2, 2, 2, 2, 2,0,0,0,0,0,0,0,0,0,0,0,0,0],

 [ 1, 2, 1, 2, 1, 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1,0,0,0,0,0],
 [ 2, 1, 1, 1, 2, 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 1, 1, 1, 2, 2, 1, 1, 1, 1, 2, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2],
 [ 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,0,0,0,0,0,0,0,0],
 [ 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 2,0,0],
 [ 1, 1, 1, 1, 1, 1, 1, 2,0,0,0,0,0,0,0,0,0,0,0,0],
 [ 2, 1, 2, 1, 1, 2, 2, 1, 1, 2,0,0,0,0,0,0,0,0,0,0],
 [ 1, 2, 1, 2, 2, 1, 1, 2, 2,0,0,0,0,0,0,0,0,0,0,0],
 [ 1, 1, 2, 1, 1, 2, 1,0,0,0,0,0,0,0,0,0,0,0,0,0]
 ]
tl = [2,5,3,4,6,6,8,2,3,7,   2,5,3,4,6,6,8,2,3,7 ]
l  = [0,0,0,0,0,0,0,0,0,0,   1,1,1,1,1,1,1,1,1,1 ]


test_pst = [
 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],
 [ 2, 2, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],

 [ 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1,0,0,0,0],
 [ 0, 1, 0, 2, 0, 1, 2, 0, 0, 1, 0, 1, 0, 1, 0, 2, 0, 2, 2, 0]
]

test_tl = [10,5,2, 9,8,2]
test_l  = [ 0,0,0, 1,1,1]



test_pst_v2 = [
 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],

 [ 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1,0,0,0,0],

 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],

 [ 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1,0,0,0,0],

 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],

 [ 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1,0,0,0,0],

 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],

 [ 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1,0,0],
 [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1,0,0,0,0],
 [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [ 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2],

 [ 2, 2, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
 [ 0, 1, 0, 2, 0, 1, 2, 0, 0, 1, 0, 1, 0, 1, 0, 2, 0, 2, 2, 0]
]


test_tl_v2 = [10,5, 9,8, 10,5, 9,8, 10,5, 9,8, 10,5, 9,8, 10,5, 2,2]
test_l_v2 = [0,0,1,1, 0,0,1,1, 0,0,1,1, 0,0,1,1, 0,0, 0,1]




#net = network.Training(pst,tl,l,test_pst_v2,test_tl_v2,test_l_v2)
#res = net.train_evaluate()


'''
TEST N LIGNE = Un Programme
'''


pst = [
[
 [ 1,1,1,1,1,1,1,1,1,1],
 [ 2,2,2,2,2,2,2,2,2,2],
 [ 0,0,0,0,0,0,0,0,0,0]

 ],[

 [ 2,2,2,2,2,2,2,2,2,2],
 [ 1,1,1,1,1,1,1,1,1,1],
 [ 0,0,0,0,0,0,0,0,0,0]

 ],[

 [ 0,0,0,1,1,1,1,1,2,2],
 [ 1,1,1,1,1,1,1,2,0,0],
 [ 1,1,1,2,2,2,2,2,0,0]

 ],[

 [ 0,1,2,2,0,0,0,0,0,0],
 [ 1,2,1,2,1,2,0,0,0,0],
 [ 1,1,1,2,0,0,0,0,0,0]
 ]
 ]
tl = [ [ 10,10,10 ],[ 10,10,10 ],[ 10,10,10],[ 10,10,10 ] ]
l  = [ [0 ], [0 ],[ 1 ],[ 1] ]


test_pst = [
[
 [ 0,0,0,0,0,0,0,0,0,0],
 [ 2,2,2,2,2,2,2,2,2,2],
 [ 1,1,1,1,1,1,1,1,1,1]

 ],[

 [ 0,0,1,2,1,2,1,1,2,2],
 [ 0,1,1,1,1,2,0,0,0,0],
 [ 2,2,2,2,1,1,0,0,0,0]

 ]
 ]
test_tl = [ [10,10,10] , [10,10,10] ]
test_l  = [ [0],[1] ]

net = network.Training(pst,tl,l,test_pst,test_tl,test_l)
res = net.train_evaluate()
